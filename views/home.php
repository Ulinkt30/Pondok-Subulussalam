<main class="container mx-auto p-0 md:p-2 flex-grow">
    <!-- Bagian Banner dengan Swiper.js -->
   <section class="relative overflow-hidden">
        
        <!-- Kontainer utama slider Swiper -->
        <div class="swiper-container mySwiper">
            <!-- Wrapper untuk slide -->
            <div class="swiper-wrapper">
                <!-- Slide pertama -->
                <div class="swiper-slide">
                    <img src="https://darunnajah.com/wp-content/uploads/2024/09/Header-Website-Penerimaan-Santri-Baru-Tahun-Ajaran-2025-2026-1.png" alt="Banner Penerimaan Santri Baru" class="w-full h-auto">
                </div>
                <!-- Slide kedua -->
                <div class="swiper-slide">
                    <img src="https://darunnajah.com/wp-content/uploads/2024/12/Slide-Website-DN-03-scaled.jpg" alt="Slide 2" class="w-full h-auto">
                </div>
                <!-- Slide ketiga -->
                <div class="swiper-slide">
                    <img src="https://darunnajah.com/wp-content/uploads/2024/12/Slide-Website-DN-04-scaled.jpg" alt="Slide 3" class="w-full h-auto">
                </div>
            </div>
            

        </div>
    </section>

    <!-- Bagian Identitas -->
    <section class="mt-8 md:mt-16">
        <div class="p-6 text-center">
            <h3 class="text-xl md:text-3xl font-bold text-gray-800 mb-6">Identitas dan Data Administratif</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mx-auto">
                <!-- Kolom 1: Informasi Umum -->
                <div class="card-with-bg-icon bg-[#dee2e6] p-6 text-left transform transition-all duration-300 hover:scale-105 hover:shadow-xl" data-icon="&#xf129;">
                    <h4 class="text-xl font-bold text-gray-800 mb-4">
                        <i class="fas fa-info-circle mr-2"></i>Informasi Umum
                    </h4>
                    <div class="space-y-2 relative z-10">
                        <div>
                            <p class="font-bold text-gray-800">Nama Pesantren:</p>
                            <p class="text-gray-600">Subulussalam</p>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">Tahun Berdiri:</p>
                            <p class="text-gray-600">2002</p>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">Pendiri/Penyelenggara:</p>
                            <p class="text-gray-600">Yayasan Subulussalam Pulau Raman</p>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">Ketua Yayasan:</p>
                            <p class="text-gray-600">Ust. M. Haizir Kamja, S.Pd.I</p>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">Pimpinan Pesantren:</p>
                            <p class="text-gray-600">Ust. Mohd Nizom Hm, S.Pd.I</p>
                        </div>
                    </div>
                </div>
                <!-- Kolom 2: Data Legalitas -->
                <div class="card-with-bg-icon bg-[#dee2e6] p-6 text-left transform transition-all duration-300 hover:scale-105 hover:shadow-xl" data-icon="&#xf15c;">
                    <h4 class="text-xl font-bold text-gray-800 mb-4">
                        <i class="fas fa-file-alt mr-2"></i>Data Legalitas
                    </h4>
                    <div class="space-y-2 relative z-10">
                        <div>
                            <p class="font-bold text-gray-800">NSPP:</p>
                            <p class="text-gray-600">510015020068</p>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">NPWP:</p>
                            <p class="text-gray-600">75.038.810.0-333.000</p>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">Izin Operasional Pontren:</p>
                            <p class="text-gray-600">01/PPS.007/2002</p>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">Nomor SK KUMHAM:</p>
                            <p class="text-gray-600">AHU-0034262.AH.01.04.TAHUN 2015</p>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">Notaris:</p>
                            <p class="text-gray-600">SRI HERMAWATI SH</p>
                        </div>
                    </div>
                </div>
                <!-- Kolom 3: Statistik Pesantren -->
                <div class="card-with-bg-icon bg-[#dee2e6] p-6 text-left transform transition-all duration-300 hover:scale-105 hover:shadow-xl" data-icon="&#xf1fe;">
                    <h4 class="text-xl font-bold text-gray-800 mb-4">
                        <i class="fas fa-chart-bar mr-2"></i>Statistik Pesantren
                    </h4>
                    <div class="space-y-2 relative z-10">
                        <div>
                            <p class="font-bold text-gray-800">Luas Tanah:</p>
                            <p class="text-gray-600">2 Hektar</p>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">Jumlah Tenaga Pendidik:</p>
                            <p class="text-gray-600">16 Orang</p>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">Jumlah Santri:</p>
                            <p class="text-gray-600">146 Orang (53 Putra, 93 Putri)</p>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">Jumlah Ruangan Kelas:</p>
                            <p class="text-gray-600">6 Ruangan</p>
                        </div>
                    </dl>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Bagian Pimpinan -->
    <section class="mt-16">
        <div class=" p-6">
            <div class="flex flex-col md:flex-row items-center gap-8 lg:gap-16">
                <!-- Kolom kiri untuk gambar profil -->
                <div class="w-full md:w-1/3 flex-shrink-0">
                    <img
                        src="/pondok-subusalam/assets/images/pemimpin.png"
                        alt="Foto Profil Pimpinan Pesantren"
                        class="w-full h-auto max-h-[500px] object-contain rounded-2xl shadow-lg transform hover:scale-105 transition-transform duration-300"
                        onerror="this.onerror=null;this.src='https://placehold.co/600x600/e5e7eb/6b7280?text=Gagal+memuat+gambar';"
                    />
                </div>
                <!-- Kolom kanan untuk biodata -->
                <div class="w-full md:w-2/3 space-y-6">
                    <h1 class="text-4xl lg:text-5xl font-extrabold text-gray-800 leading-tight">
                        Profil Pimpinan
                    </h1>
                    <h2 class="text-2xl font-bold text-gray-800 border-b-2 border-[#660708] pb-2">
                        Mohd Nizom HM
                    </h2>
                    <!-- Daftar definisi untuk biodata -->
                    <dl class="text-gray-700 text-lg divide-y divide-gray-300">
                        <div class="py-2 flex flex-col">
                            <dt class="font-semibold text-[#2b2d42]">
                                <i class="fas fa-map-marker-alt mr-2 text-red-500"></i>Tempat, Tanggal Lahir
                            </dt>
                            <dd class="mt-1">Pulau Raman, 05 April 1974</dd>
                        </div>
                        <div class="py-2 flex flex-col">
                            <dt class="font-semibold text-[#2b2d42]">
                                <i class="fas fa-graduation-cap mr-2 text-blue-500"></i>Pendidikan
                            </dt>
                            <dd class="mt-1">Alumni Madrasah Musthafawiyah Purba Baru, Tapanuli Selatan â€“ Medan, Tahun 1996</dd>
                        </div>
                        <div class="py-2 flex flex-col">
                            <dt class="font-semibold text-[#2b2d42]">
                                <i class="fas fa-briefcase mr-2 text-green-500"></i>Pekerjaan
                            </dt>
                            <dd class="mt-1">Tenaga Pendidik di Pesantren Subulus-Salam, Desa Pulau Raman</dd>
                        </div>
                        <div class="py-2 flex flex-col">
                            <dt class="font-semibold text-[#2b2d42]">
                                <i class="fas fa-home mr-2 text-yellow-500"></i>Tempat Tinggal
                            </dt>
                            <dd class="mt-1">Kompleks Ponpes Subulus-Salam</dd>
                        </div>
                        <div class="py-2 flex flex-col">
                            <dt class="font-semibold text-[#2b2d42]">
                                <i class="fas fa-ring mr-2 text-purple-500"></i>Status
                            </dt>
                            <dd class="mt-1">Menikah</dd>
                        </div>
                    </dl>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Bagian Izin Operasional -->
    <section class="mt-16">
        <div class="bg-white rounded-xl shadow-md p-6">
            <!-- Menghapus class mb-6 untuk mengurangi jarak antara judul dan paragraf -->
            <h3 class="text-xl md:text-3xl font-bold text-gray-800 text-center md:text-left md:-mb-20">Piagam Izin Operasional</h3>
            <div class="flex flex-col md:flex-row items-center gap-8 lg:gap-16">
                <div class="w-full md:w-1/2 flex flex-col justify-center flex-shrink-0">
                    <!-- Wrapper untuk menyembunyikan teks di mobile -->
                    <div id="piagam-text" class="relative overflow-hidden h-12 md:h-auto transition-all duration-300">
                        <p class="text-lg text-gray-600 text-justify">
                            Ini adalah Piagam Izin Operasional untuk Pondok Pesantren Subulussalam.
                            Dokumen resmi ini dikeluarkan oleh Kementerian Agama Kabupaten Merangin.
                            Piagam ini mengesahkan pendirian pondok pesantren tersebut di Provinsi Jambi.
                            Piagam ini memiliki Nomor Statistik Pondok Pesantren (NSPP) 510015020068.
                            Izin ini didasarkan pada surat keputusan dari Direktorat Jenderal Pendidikan Islam.
                            Nomor ini menjadi identitas resmi pondok pesantren di bawah Kementerian Agama.
                            Dokumen ini ditandatangani oleh Drs. H. Marwan di Bangko pada 20 Januari 2020.
                            Izin operasional pondok pesantren ini berlaku sampai dengan 20 Januari 2025.
                            Piagam ini menegaskan status legal dan memastikan operasionalnya sesuai peraturan.
                        </p>
                    </div>
                    <!-- Tombol untuk melihat selengkapnya -->
                    <button id="toggle-piagam" class="md:hidden mt-2 text-blue-500 hover:text-blue-700 font-semibold flex items-center justify-center">
                        <span class="mr-2">Lihat Selengkapnya</span>
                        <i id="piagam-icon" class="fas fa-chevron-down transition-transform duration-300"></i>
                    </button>
                </div>
                <div class="w-full md:w-1/2 flex-shrink-0">
                    <img src="/pondok-subusalam/assets/images/piagam.jpg" alt="Surat Izin Operasional" class="w-full h-auto max-h-60 md:max-h-[500px] object-contain transform hover:scale-105 transition duration-300">
                </div>
            </div>
        </div>
    </section>
    
    <!-- Bagian Galeri (dinamis) -->
    <section class="mt-16">
        <div class=" p-6 text-center">
            <h3 class="text-xl md:text-3xl font-bold text-gray-800 mb-6">Galeri</h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
                <?php
                    // Memuat model galeri dan mengambil data
                    global $conn;
                    require_once ROOT_PATH . '/models/GaleriModel.php';
                    $galeriModel = new GaleriModel($conn);
                    $galeri_items = $galeriModel->getAllGaleri();
                    
                    // Menampilkan maksimal 3 item
                    $limit = 3;
                    $count = 0;
                    if (!empty($galeri_items)) {
                        foreach ($galeri_items as $item) {
                            if ($count < $limit) {
                                // Tampilkan hanya 2 item di layar kecil (sm dan di bawahnya), 3 di layar md ke atas
                                $item_class = ($count >= 2) ? 'hidden md:block' : '';
                ?>
                                <div class="bg-gray-100 rounded-xl shadow-md overflow-hidden <?= $item_class ?>">
                                    <img src="/pondok-subusalam/assets/uploads/galeri/<?= htmlspecialchars($item['gambar']) ?>" alt="<?= htmlspecialchars($item['judul']) ?>" class="w-full h-48 object-cover">
                                    <div class="p-4">
                                        <h4 class="text-lg font-bold text-gray-800"><?= htmlspecialchars($item['judul']) ?></h4>
                                        <p class="text-sm text-gray-600 mt-1"><?= htmlspecialchars(substr($item['deskripsi'], 0, 50)) ?>...</p>
                                    </div>
                                </div>
                <?php
                                $count++;
                            }
                        }
                    } else {
                ?>
                    <p class="col-span-full text-center text-[#2b2d42]">Tidak ada item galeri yang ditemukan.</p>
                <?php
                    }
                ?>
            </div>
            <div class="mt-8">
                <a href="/pondok-subusalam/galeri" class="bg-[#ba181b] text-white px-6 py-3 rounded-full text-lg font-semibold hover:bg-[#e5383b] transition duration-300 flex items-center justify-center space-x-2 mx-auto w-fit">
                    <i class="fas fa-images"></i>
                    <span>Lihat Lainnya</span>
                </a>
            </div>
        </div>
    </section>
    
    <!-- Integrasi Peta Lokasi -->
    <section class="mt-16">
        <div class="bg-white rounded-xl shadow-md p-6 text-center">
            <h3 class="text-xl md:text-3xl font-bold text-gray-800 mb-6">Peta Lokasi</h3>
            <!-- Wrapper untuk membuat iframe peta responsif -->
            <div class="relative w-full h-96 rounded-xl overflow-hidden">
                <iframe
                    src="https://www.google.com/maps/embed?pb=!1m13!1m8!1m3!1d19621.38230453934!2d102.13492900000001!3d-2.313394!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMsKwMTknMDYuMyJTIDEwMsKwMDknMDYuNiJF!5e1!3m2!1sid!2sus!4v1754571304710!5m2!1sid!2sus"
                    style="border:0;"
                    allowfullscreen=""
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"
                    class="absolute inset-0 w-full h-full"
                ></iframe>
            </div>
        </div>
    </section>
</main>

<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var swiper = new Swiper('.mySwiper', {
            loop: true,
            autoplay: {
                delay: 2500,
                disableOnInteraction: false,
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
        });

        // Logika untuk tombol "Lihat Selengkapnya" pada bagian Izin Operasional
        const piagamText = document.getElementById('piagam-text');
        const togglePiagamBtn = document.getElementById('toggle-piagam');
        const piagamIcon = document.getElementById('piagam-icon');

        // Mengatur tinggi awal untuk layar mobile
        if (window.innerWidth < 768) {
            piagamText.classList.add('h-12', 'overflow-hidden');
            piagamIcon.classList.remove('fa-chevron-up');
            piagamIcon.classList.add('fa-chevron-down');
        } else {
            piagamText.classList.remove('h-12', 'overflow-hidden');
            togglePiagamBtn.classList.add('hidden');
        }

        togglePiagamBtn.addEventListener('click', function() {
            if (piagamText.classList.contains('h-12')) {
                piagamText.classList.remove('h-12', 'overflow-hidden');
                piagamText.classList.add('h-auto');
                piagamIcon.classList.remove('fa-chevron-down');
                piagamIcon.classList.add('fa-chevron-up');
                this.querySelector('span').textContent = 'Tutup';
            } else {
                piagamText.classList.remove('h-auto');
                piagamText.classList.add('h-12', 'overflow-hidden');
                piagamIcon.classList.remove('fa-chevron-up');
                piagamIcon.classList.add('fa-chevron-down');
                this.querySelector('span').textContent = 'Lihat Selengkapnya';
            }
        });

        // Mengatur ulang tampilan saat ukuran jendela berubah
        window.addEventListener('resize', function() {
            if (window.innerWidth < 768) {
                piagamText.classList.add('h-12', 'overflow-hidden');
                togglePiagamBtn.classList.remove('hidden');
            } else {
                piagamText.classList.remove('h-12', 'overflow-hidden');
                togglePiagamBtn.classList.add('hidden');
            }
        });
    });
</script>

<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
<style>
    .swiper-container {
        width: 100%;
        height: 100%;
    }
    .swiper-slide img {
        width: 100%;
        height: auto;
        display: block;
    }

    .card-with-bg-icon {
        position: relative;
        z-index: 1;
    }
    .card-with-bg-icon::before {
        font-family: "Font Awesome 5 Free";
        content: attr(data-icon);
        font-weight: 900;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 15rem; /* Ukuran ikon lebih besar */
        color: #E5E7EB; /* Ubah warna ikon kembali ke abu-abu */
        opacity: 0.4;
        line-height: 1;
        z-index: -1;
    }
</style>
